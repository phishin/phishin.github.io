import{H as ce,O as F,P as R,Q as pe,R as X,S as xe,U as me,V as q,r as S,m as y,g as be,n as fe,p as he,c as l,o as i,a as s,y as ye,u as C,v as $,s as _,t as h,F as K,x as Z,W as ve,X as ge}from"./Dp84NIbv.js";import{u as _e}from"./CLL0vixW.js";import{_ as we}from"./DlAUqK2U.js";import{u as ke}from"./B1YhH-ao.js";const A=()=>({firstName:"",lastName:"",phone:"",email:""}),Se=ce("userProfile",{state:()=>({profile:A(),isLoading:!1,isSaving:!1,error:null,lastSavedAt:null,hasExistingProfile:!1}),actions:{resetProfile(){this.profile=A(),this.error=null,this.lastSavedAt=null,this.hasExistingProfile=!1},async loadProfile(w=null){var r,m,o,p,b;const P=F(),{auth:x,firebaseDatabase:c}=P.$firebase||{},d=w?{uid:w}:x==null?void 0:x.currentUser;if(!(d!=null&&d.uid)||!c){this.resetProfile();return}this.isLoading=!0,this.error=null;try{const n=R(c,"userProfiles",d.uid),f=await xe(n);if(f.exists()){const u=f.data()||{},E={...A(),...u};this.profile=E,this.hasExistingProfile=!0;const L=(m=(r=u.updatedAt)==null?void 0:r.toDate)==null?void 0:m.call(r),I=(p=(o=u.createdAt)==null?void 0:o.toDate)==null?void 0:p.call(o);this.lastSavedAt=L||I||null}else{const u=((b=x==null?void 0:x.currentUser)==null?void 0:b.email)||"";this.profile={...A(),email:u},this.hasExistingProfile=!1,this.lastSavedAt=null}}catch(n){throw console.error("Failed to load profile",n),this.error=(n==null?void 0:n.message)||"Unable to load your profile right now.",n}finally{this.isLoading=!1}},async saveProfile(w={}){const x=F().$firebase||{},{auth:c,firebaseDatabase:d,updateProfile:r,updateEmail:m}=x,o=c==null?void 0:c.currentUser;if(!(o!=null&&o.uid)||!d){const n=new Error("You must be logged in to save your profile.");throw this.error=n.message,n}this.isSaving=!0,this.error=null;const p={...A(),...this.profile,...w,email:w.email??this.profile.email??o.email??""},b={...p,updatedAt:X()};this.hasExistingProfile||(b.createdAt=X());try{const n=R(d,"userProfiles",o.uid);await pe(n,b,{merge:!0});const f=[p.firstName,p.lastName].filter(Boolean).join(" ").trim();if(f)try{await(r==null?void 0:r(o,{displayName:f}))}catch(u){console.warn("Unable to update display name",u)}if(p.email&&o.email&&p.email!==o.email&&typeof m=="function")try{await m(o,p.email)}catch(u){console.warn("Unable to update authentication email",u),this.error=this.error||(u==null?void 0:u.message)||"Unable to update email address."}this.profile=p,this.hasExistingProfile=!0,this.lastSavedAt=new Date}catch(n){throw console.error("Failed to save profile",n),this.error=(n==null?void 0:n.message)||"Unable to save your profile right now.",n}finally{this.isSaving=!1}}}}),De={class:"dashboard-page w-full min-h-screen bg-neutral-50 font-primary py-[80px] lg:pt-[120px]"},Ne={class:"max-w-[1200px] mx-auto px-6 lg:px-8"},Ae={key:0,class:"bg-white border border-neutral-200 rounded-[16px] shadow-sm p-8 text-center"},Pe={key:1,class:"bg-white border border-neutral-200 rounded-[16px] shadow-sm p-8"},Le={key:2,class:"space-y-12"},Ue={class:"bg-white border border-neutral-200 rounded-[20px] shadow-sm overflow-hidden"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$e={class:"flex flex-col"},Ee=["disabled"],Ie={class:"flex flex-col"},Ve=["disabled"],Fe={class:"flex flex-col"},Re=["disabled"],Be={class:"flex flex-col"},je=["disabled"],Te={class:"space-y-3"},Ye={key:0,class:"bg-red-50 border border-red-200 text-red-600 text-[16px] font-medium px-4 py-3 rounded-[10px]"},Me={key:1,class:"bg-green-50 border border-green-200 text-green-700 text-[16px] font-medium px-4 py-3 rounded-[5px]"},ze={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},He={key:0,class:"text-[14px] text-neutral-500"},Ge=["disabled"],Je={key:0},Oe={key:1},Qe={class:"bg-white border border-neutral-200 rounded-[5px] shadow-sm overflow-hidden",id:"saved-logos"},We={class:"px-6 md:px-10 py-8 space-y-6"},Xe={key:0,class:"text-neutral-600 text-[18px] font-medium"},qe={key:1,class:"text-neutral-600 text-[18px] font-medium"},Ke={key:2,class:"grid gap-6"},Ze={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},et={class:"space-y-2"},tt={class:"text-[20px] font-bold text-black leading-[1.2]"},st={class:"text-[14px] text-neutral-500"},at={key:0,class:"text-[14px] text-neutral-500"},nt={key:1,class:"text-[14px] text-neutral-500"},rt={key:2,class:"text-[14px] text-neutral-500"},ot={key:3,class:"flex flex-wrap gap-2 pt-1"},lt={class:"flex flex-col items-stretch gap-3 min-w-[180px]"},it=["onClick"],dt=["disabled","onClick"],ut={key:1,class:"block relative text-[14px] text-neutral-700 bg-white border border-neutral-200 rounded-[5px] p-3 transition-all duration-500",style:{transition:"0.5s all ease-in-out"}},ct={class:"flex gap-3"},pt=["disabled","onClick"],xt={key:0,class:"text-[12px] font-medium"},mt={key:1},bt={__name:"dashboard",setup(w){var z,H;ke({title:"Account Dashboard | Cyborg Logo"});const P=me(),x=F(),c=_e(),d=Se(),r=q({firstName:"",lastName:"",phone:"",email:""}),m=q({success:""}),o=((z=x.$firebase)==null?void 0:z.auth)||null,p=(H=x.$firebase)==null?void 0:H.onAuthStateChanged,b=S((o==null?void 0:o.currentUser)||null),n=S(!b.value),f=S(!1),u=S(null),E=e=>{if(!e)return null;if(typeof e.toDate=="function")try{return e.toDate()}catch{return null}if(e instanceof Date)return e;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},L=e=>{if(!e)return"just now";try{return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}catch{return e.toString()}},I=e=>{var t,a,v;return((t=e==null?void 0:e.state)==null?void 0:t.fullBusinessName)||((a=e==null?void 0:e.state)==null?void 0:a.companyName)||((v=e==null?void 0:e.state)==null?void 0:v.businessNameInitials)||"Saved Logo"},V=y(()=>d.error),D=y(()=>d.isLoading),k=y(()=>d.isSaving),B=y(()=>d.lastSavedAt?L(d.lastSavedAt):""),j=y(()=>{const e=d.profile||{};return["firstName","lastName","phone","email"].some(t=>(r[t]||"")!==(e[t]||""))}),ee=y(()=>c.savedLogos||[]),T=y(()=>ee.value.map(e=>({...e,createdAtDate:E(e.createdAt)}))),te=e=>(e||"").replace(/\D/g,""),Y=e=>{const t=te(e).slice(0,10),a=t.length;return a?a<4?`(${t}`:a<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:""},se=e=>{r.phone=Y(e.target.value)},ae=()=>{r.phone=Y(r.phone)},ne=y(()=>{const e=(r.phone||"").replace(/\D/g,"");return e.length===0||e.length===10}),N=S(new Set),U=S(null),re=e=>{e!=null&&e.id&&(U.value=e.id)},oe=()=>{U.value=null},le=async e=>{if(e!=null&&e.id){N.value.add(e.id);try{const t=ve(x.$firebaseApp);await ge(R(t,"logos",e.id));const a=(c.savedLogos||[]).filter(v=>v.id!==e.id);c.$patch({savedLogos:a})}catch(t){console.error("Failed to delete logo:",t),alert("Sorry, we could not delete that logo. Please try again.")}finally{N.value.delete(e.id),U.value=null}}};be(()=>d.profile,e=>{r.firstName=(e==null?void 0:e.firstName)||"",r.lastName=(e==null?void 0:e.lastName)||"",r.phone=(e==null?void 0:e.phone)||"",r.email=(e==null?void 0:e.email)||""},{immediate:!0});const ie=e=>{e&&(c.restoreLogo(e),P.push("/create-my-logo"))},M=async e=>{if(!e){b.value=null,n.value=!1,m.success="",d.resetProfile(),c.$patch({savedLogos:[]});return}b.value=e,n.value=!1,m.success="";try{await d.loadProfile(e.uid)}catch{}f.value=!0;try{await c.fetchSavedLogos()}catch(t){console.error("Unable to load saved logos",t)}finally{f.value=!1}};fe(async()=>{o!=null&&o.currentUser?await M(o.currentUser):n.value=!0,p&&o?u.value=p(o,e=>{M(e)}):n.value=!1}),he(()=>{typeof u.value=="function"&&u.value()});const de=async()=>{m.success="";try{await d.saveProfile({...r}),V.value||(m.success="Profile updated successfully.")}catch{}};return(e,t)=>(i(),l("section",De,[s("div",Ne,[t[13]||(t[13]=s("header",{class:"mb-10"},[s("h1",{class:"text-[34px] md:text-[42px] font-black text-black leading-[1.1] mb-4 uppercase"}," Account Dashboard "),s("p",{class:"text-neutral-600 text-[18px] md:text-[20px] leading-[1.5] max-w-3xl"}," Review and update your contact details, then jump back into any logo concepts you saved while building. ")],-1)),n.value?(i(),l("div",Ae,t[4]||(t[4]=[s("p",{class:"text-neutral-600 text-[18px] font-medium"},"Checking your account details...",-1)]))):b.value?(i(),l("div",Le,[s("section",Ue,[t[10]||(t[10]=s("div",{class:"px-6 md:px-10 py-6 border-b border-neutral-200 bg-neutral-100"},[s("h2",{class:"text-[26px] md:text-[30px] font-black text-black uppercase"},"Profile Details"),s("p",{class:"text-neutral-600 text-[16px] md:text-[18px] leading-[1.5]"}," Update the information we use when contacting you about your designs or delivering finished files. ")],-1)),s("form",{class:"px-6 md:px-10 py-8 space-y-8",onSubmit:ye(de,["prevent"])},[s("div",Ce,[s("div",$e,[t[6]||(t[6]=s("label",{for:"firstName",class:"text-[15px] font-semibold text-neutral-700 mb-2 uppercase tracking-[1px]"}," First Name ",-1)),C(s("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=a=>r.firstName=a),type:"text",autocomplete:"given-name",class:"rounded-[10px] border border-neutral-300 focus:border-brand-300 focus:ring-0 text-[16px] text-neutral-900 px-4 py-3 disabled:bg-neutral-100 disabled:text-neutral-400",placeholder:"John",disabled:D.value||n.value||k.value},null,8,Ee),[[$,r.firstName]])]),s("div",Ie,[t[7]||(t[7]=s("label",{for:"lastName",class:"text-[15px] font-semibold text-neutral-700 mb-2 uppercase tracking-[1px]"}," Last Name ",-1)),C(s("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=a=>r.lastName=a),type:"text",autocomplete:"family-name",class:"rounded-[10px] border border-neutral-300 focus:border-brand-300 focus:ring-0 text-[16px] text-neutral-900 px-4 py-3 disabled:bg-neutral-100 disabled:text-neutral-400",placeholder:"Doe",disabled:D.value||n.value||k.value},null,8,Ve),[[$,r.lastName]])]),s("div",Fe,[t[8]||(t[8]=s("label",{for:"phone",class:"text-[15px] font-semibold text-neutral-700 mb-2 uppercase tracking-[1px]"}," Phone ",-1)),C(s("input",{id:"phone","onUpdate:modelValue":t[2]||(t[2]=a=>r.phone=a),type:"tel",inputmode:"numeric",maxlength:14,autocomplete:"tel",class:"rounded-[10px] border border-neutral-300 focus:border-brand-300 focus:ring-0 text-[16px] text-neutral-900 px-4 py-3 disabled:bg-neutral-100 disabled:text-neutral-400",placeholder:"(555) 123-4567",disabled:k.value||D.value||n.value||!j.value||!ne.value,onInput:se,onBlur:ae},null,40,Re),[[$,r.phone]])]),s("div",Be,[t[9]||(t[9]=s("label",{for:"email",class:"text-[15px] font-semibold text-neutral-700 mb-2 uppercase tracking-[1px]"}," Email ",-1)),C(s("input",{id:"email","onUpdate:modelValue":t[3]||(t[3]=a=>r.email=a),type:"email",autocomplete:"email",class:"rounded-[10px] border border-neutral-300 focus:border-brand-300 focus:ring-0 text-[16px] text-neutral-900 px-4 py-3 disabled:bg-neutral-100 disabled:text-neutral-400",placeholder:"you@example.com",disabled:D.value||n.value||k.value},null,8,je),[[$,r.email]])])]),s("div",Te,[V.value?(i(),l("p",Ye,h(V.value),1)):_("",!0),m.success?(i(),l("p",Me,h(m.success),1)):_("",!0)]),s("div",ze,[B.value?(i(),l("p",He," Last saved "+h(B.value),1)):_("",!0),s("button",{type:"submit",class:"cta-btn bg-brand-300 text-white uppercase font-black tracking-[2px] text-[16px] leading-[1] py-4 px-6 transition transition-fast hover:bg-brand-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:k.value||D.value||n.value||!j.value},[k.value?(i(),l("span",Je,"Saving...")):(i(),l("span",Oe,"Save Changes"))],8,Ge)])],32)]),s("section",Qe,[t[12]||(t[12]=s("div",{class:"px-6 md:px-10 py-6 border-b border-neutral-200 bg-neutral-100"},[s("h2",{class:"text-[26px] md:text-[30px] font-black text-black uppercase"},"Saved Logos"),s("p",{class:"text-neutral-600 text-[16px] md:text-[18px] leading-[1.5]"}," Revisit any concept you saved. Restoring a logo sends you right back into the builder with the same settings. ")],-1)),s("div",We,[f.value?(i(),l("div",Xe,"Loading saved logos...")):T.value.length?(i(),l("div",Ke,[(i(!0),l(K,null,Z(T.value,a=>{var v,G,J,O,Q,W;return i(),l("article",{key:a.id,class:"border border-neutral-200 rounded-[5px] p-6 bg-neutral-50"},[s("div",Ze,[s("div",et,[s("h3",tt,h(I(a)),1),s("p",st," Saved "+h(L(a.createdAtDate)),1),(v=a.state)!=null&&v.selectedLogoID?(i(),l("p",at," Logo ID: "+h(a.state.selectedLogoID),1)):_("",!0),(G=a.state)!=null&&G.businessCategory?(i(),l("p",nt," Category: "+h(a.state.businessCategory),1)):_("",!0),(J=a.state)!=null&&J.selectedIndustry?(i(),l("p",rt," Industry: "+h(((O=a.state.selectedIndustry)==null?void 0:O.name)||a.state.selectedIndustry),1)):_("",!0),(W=(Q=a.state)==null?void 0:Q.selectedColorStyles)!=null&&W.length?(i(),l("div",ot,[(i(!0),l(K,null,Z(a.state.selectedColorStyles,(g,ue)=>(i(),l("span",{key:`${a.id}-color-${ue}`,class:"px-3 py-1 rounded-[5px] bg-white border border-brand-field-border-gray text-[13px] text-neutral-600"},h((g==null?void 0:g.name)||g),1))),128))])):_("",!0)]),s("div",lt,[s("button",{type:"button",class:"cta-btn bg-brand-300 text-white uppercase font-black tracking-[2px] text-[14px] leading-[1] py-3 px-4 rounded-[10px] transition transition-fast hover:bg-brand-200",onClick:g=>ie(a)}," Resume Editing ",8,it),U.value!==a.id?(i(),l("button",{key:0,type:"button",class:"text-red-600 font-bold text-[14px] underline disabled:opacity-50 disabled:cursor-not-allowed",disabled:N.value.has(a.id),onClick:g=>re(a)}," Delete ",8,dt)):(i(),l("div",ut,[t[11]||(t[11]=s("p",{class:"mb-2"}," Are you sure you want to delete? ",-1)),s("div",ct,[s("button",{type:"button",class:"cta-btn bg-red-600 text-white uppercase font-black tracking-[1px] text-[12px] leading-[1] py-2 px-3 rounded-[8px] disabled:opacity-50 disabled:cursor-not-allowed",disabled:N.value.has(a.id),onClick:g=>le(a)},[N.value.has(a.id)?(i(),l("span",xt,"Deleting…")):(i(),l("span",mt,"Yes"))],8,pt),s("button",{type:"button",class:"text-neutral-600 font-bold text-[12px] underline",onClick:oe}," No ")])]))])])])}),128))])):(i(),l("div",qe," You haven't saved any logos yet. Generate designs and save your favorites to see them here. "))])])])):(i(),l("div",Pe,t[5]||(t[5]=[s("h2",{class:"text-[24px] font-bold text-black mb-3"},"You're almost there",-1),s("p",{class:"text-neutral-600 text-[18px] leading-[1.5]"}," Sign in to access your dashboard, update your information, and keep all of your saved logo progress in one place. ",-1)])))])]))}},gt=we(bt,[["__scopeId","data-v-e1c64a09"]]);export{gt as default};
