import{O as oe,P as le,Q as z,r as v,m as c,g as de,n as ie,p as ue,c as n,o as r,a as s,y as ce,u as w,v as S,s as b,t as u,F as G,x as H,R as pe,S as xe,U as be}from"./DFMj1dpU.js";import{u as me}from"./D_Ei_-ZI.js";import{u as fe}from"./Ch5gRBTC.js";import{_ as he}from"./DlAUqK2U.js";import{u as ve}from"./Bx6FUDKl.js";const ye={class:"dashboard-page w-full min-h-screen bg-neutral-50 font-primary py-[80px] lg:pt-[120px]"},ge={class:"max-w-[1200px] mx-auto px-6 lg:px-8"},_e={key:0,class:"bg-white border border-neutral-200 rounded-[16px] shadow-sm p-8 text-center"},ke={key:1,class:"bg-white border border-neutral-200 rounded-[16px] shadow-sm p-8"},we={key:2,class:"space-y-12"},Se={class:"bg-white border border-neutral-200 rounded-[20px] shadow-sm overflow-hidden"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ne={class:"flex flex-col"},Le=["disabled"],Ce={class:"flex flex-col"},$e=["disabled"],Ae={class:"flex flex-col"},Ue=["disabled"],Ie={class:"flex flex-col"},Pe=["disabled"],Ve={class:"space-y-3"},Be={key:0,class:"bg-red-50 border border-red-200 text-red-600 text-[16px] font-medium px-4 py-3 rounded-[10px]"},Fe={key:1,class:"bg-green-50 border border-green-200 text-green-700 text-[16px] font-medium px-4 py-3 rounded-[5px]"},Re={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},je={key:0,class:"text-[14px] text-neutral-500"},Ee=["disabled"],Te={key:0},Me={key:1},Ye={class:"bg-white border border-neutral-200 rounded-[5px] shadow-sm overflow-hidden",id:"saved-logos"},ze={class:"px-6 md:px-10 py-8 space-y-6"},Ge={key:0,class:"text-neutral-600 text-[18px] font-medium"},He={key:1,class:"text-neutral-600 text-[18px] font-medium"},Je={key:2,class:"grid gap-6"},Oe={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},Qe={class:"space-y-2"},qe={class:"text-[20px] font-bold text-black leading-[1.2]"},Ke={class:"text-[14px] text-neutral-500"},We={key:0,class:"text-[14px] text-neutral-500"},Xe={key:1,class:"text-[14px] text-neutral-500"},Ze={key:2,class:"text-[14px] text-neutral-500"},et={key:3,class:"flex flex-wrap gap-2 pt-1"},tt={class:"flex flex-col items-stretch gap-3 min-w-[180px]"},st=["onClick"],at=["disabled","onClick"],nt={key:1,class:"block relative text-[14px] text-neutral-700 bg-white border border-neutral-200 rounded-[5px] p-3 transition-all duration-500",style:{transition:"0.5s all ease-in-out"}},rt={class:"flex gap-3"},ot=["disabled","onClick"],lt={key:0,class:"text-[12px] font-medium"},dt={key:1},it={__name:"dashboard",setup(ut){var F,R;ve({title:"Account Dashboard | Cyborg Logo"});const J=oe(),D=le(),m=me(),l=fe(),o=z({firstName:"",lastName:"",phone:"",email:""}),f=z({success:""}),i=((F=D.$firebase)==null?void 0:F.auth)||null,$=(R=D.$firebase)==null?void 0:R.onAuthStateChanged,_=v((i==null?void 0:i.currentUser)||null),d=v(!_.value),N=v(!1),L=v(null),O=e=>{if(!e)return null;if(typeof e.toDate=="function")try{return e.toDate()}catch{return null}if(e instanceof Date)return e;const t=new Date(e);return Number.isNaN(t.getTime())?null:t},A=e=>{if(!e)return"just now";try{return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}catch{return e.toString()}},Q=e=>{var t,a,p;return((t=e==null?void 0:e.state)==null?void 0:t.fullBusinessName)||((a=e==null?void 0:e.state)==null?void 0:a.companyName)||((p=e==null?void 0:e.state)==null?void 0:p.businessNameInitials)||"Saved Logo"},C=c(()=>l.error),y=c(()=>l.isLoading),h=c(()=>l.isSaving),U=c(()=>l.lastSavedAt?A(l.lastSavedAt):""),I=c(()=>{const e=l.profile||{};return["firstName","lastName","phone","email"].some(t=>(o[t]||"")!==(e[t]||""))}),q=c(()=>m.savedLogos||[]),P=c(()=>q.value.map(e=>({...e,createdAtDate:O(e.createdAt)}))),K=e=>(e||"").replace(/\D/g,""),V=e=>{const t=K(e).slice(0,10),a=t.length;return a?a<4?`(${t}`:a<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:""},W=e=>{o.phone=V(e.target.value)},X=()=>{o.phone=V(o.phone)},Z=c(()=>{const e=(o.phone||"").replace(/\D/g,"");return e.length===0||e.length===10}),g=v(new Set),k=v(null),ee=e=>{e!=null&&e.id&&(k.value=e.id)},te=()=>{k.value=null},se=async e=>{if(e!=null&&e.id){g.value.add(e.id);try{const t=pe(D.$firebaseApp);await xe(be(t,"logos",e.id));const a=(m.savedLogos||[]).filter(p=>p.id!==e.id);m.$patch({savedLogos:a})}catch(t){console.error("Failed to delete logo:",t),alert("Sorry, we could not delete that logo. Please try again.")}finally{g.value.delete(e.id),k.value=null}}};de(()=>l.profile,e=>{o.firstName=(e==null?void 0:e.firstName)||"",o.lastName=(e==null?void 0:e.lastName)||"",o.phone=(e==null?void 0:e.phone)||"",o.email=(e==null?void 0:e.email)||""},{immediate:!0});const ae=e=>{e&&(m.restoreLogo(e),J.push("/create-my-logo"))},B=async e=>{if(!e){_.value=null,d.value=!1,f.success="",l.resetProfile(),m.$patch({savedLogos:[]});return}_.value=e,d.value=!1,f.success="";try{await l.loadProfile(e.uid)}catch{}N.value=!0;try{await m.fetchSavedLogos()}catch(t){console.error("Unable to load saved logos",t)}finally{N.value=!1}};ie(async()=>{i!=null&&i.currentUser?await B(i.currentUser):d.value=!0,$&&i?L.value=$(i,e=>{B(e)}):d.value=!1}),ue(()=>{typeof L.value=="function"&&L.value()});const ne=async()=>{f.success="";try{await l.saveProfile({...o}),C.value||(f.success="Profile updated successfully.")}catch{}};return(e,t)=>(r(),n("section",ye,[s("div",ge,[t[13]||(t[13]=s("header",{class:"mb-10"},[s("h1",{class:"text-[34px] md:text-[42px] font-black text-black leading-[1.1] mb-4 uppercase"}," Account Dashboard "),s("p",{class:"text-neutral-600 text-[18px] md:text-[20px] leading-[1.5] max-w-3xl"}," Review and update your contact details, then jump back into any logo concepts you saved while building. ")],-1)),d.value?(r(),n("div",_e,t[4]||(t[4]=[s("p",{class:"text-neutral-600 text-[18px] font-medium"},"Checking your account details...",-1)]))):_.value?(r(),n("div",we,[s("section",Se,[t[10]||(t[10]=s("div",{class:"px-6 md:px-10 py-6 border-b border-neutral-200 bg-neutral-100"},[s("h2",{class:"text-[26px] md:text-[30px] font-black text-black uppercase"},"Profile Details"),s("p",{class:"text-neutral-600 text-[16px] md:text-[18px] leading-[1.5]"}," Update the information we use when contacting you about your designs or delivering finished files. ")],-1)),s("form",{class:"px-6 md:px-10 py-8 space-y-8",onSubmit:ce(ne,["prevent"])},[s("div",De,[s("div",Ne,[t[6]||(t[6]=s("label",{for:"firstName",class:"text-[15px] font-semibold text-neutral-700 mb-2 uppercase tracking-[1px]"}," First Name ",-1)),w(s("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=a=>o.firstName=a),type:"text",autocomplete:"given-name",class:"rounded-[10px] border border-neutral-300 focus:border-brand-300 focus:ring-0 text-[16px] text-neutral-900 px-4 py-3 disabled:bg-neutral-100 disabled:text-neutral-400",placeholder:"John",disabled:y.value||d.value||h.value},null,8,Le),[[S,o.firstName]])]),s("div",Ce,[t[7]||(t[7]=s("label",{for:"lastName",class:"text-[15px] font-semibold text-neutral-700 mb-2 uppercase tracking-[1px]"}," Last Name ",-1)),w(s("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=a=>o.lastName=a),type:"text",autocomplete:"family-name",class:"rounded-[10px] border border-neutral-300 focus:border-brand-300 focus:ring-0 text-[16px] text-neutral-900 px-4 py-3 disabled:bg-neutral-100 disabled:text-neutral-400",placeholder:"Doe",disabled:y.value||d.value||h.value},null,8,$e),[[S,o.lastName]])]),s("div",Ae,[t[8]||(t[8]=s("label",{for:"phone",class:"text-[15px] font-semibold text-neutral-700 mb-2 uppercase tracking-[1px]"}," Phone ",-1)),w(s("input",{id:"phone","onUpdate:modelValue":t[2]||(t[2]=a=>o.phone=a),type:"tel",inputmode:"numeric",maxlength:14,autocomplete:"tel",class:"rounded-[10px] border border-neutral-300 focus:border-brand-300 focus:ring-0 text-[16px] text-neutral-900 px-4 py-3 disabled:bg-neutral-100 disabled:text-neutral-400",placeholder:"(555) 123-4567",disabled:h.value||y.value||d.value||!I.value||!Z.value,onInput:W,onBlur:X},null,40,Ue),[[S,o.phone]])]),s("div",Ie,[t[9]||(t[9]=s("label",{for:"email",class:"text-[15px] font-semibold text-neutral-700 mb-2 uppercase tracking-[1px]"}," Email ",-1)),w(s("input",{id:"email","onUpdate:modelValue":t[3]||(t[3]=a=>o.email=a),type:"email",autocomplete:"email",class:"rounded-[10px] border border-neutral-300 focus:border-brand-300 focus:ring-0 text-[16px] text-neutral-900 px-4 py-3 disabled:bg-neutral-100 disabled:text-neutral-400",placeholder:"you@example.com",disabled:y.value||d.value||h.value},null,8,Pe),[[S,o.email]])])]),s("div",Ve,[C.value?(r(),n("p",Be,u(C.value),1)):b("",!0),f.success?(r(),n("p",Fe,u(f.success),1)):b("",!0)]),s("div",Re,[U.value?(r(),n("p",je," Last saved "+u(U.value),1)):b("",!0),s("button",{type:"submit",class:"cta-btn bg-brand-300 text-white uppercase font-black tracking-[2px] text-[16px] leading-[1] py-4 px-6 transition transition-fast hover:bg-brand-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:h.value||y.value||d.value||!I.value},[h.value?(r(),n("span",Te,"Saving...")):(r(),n("span",Me,"Save Changes"))],8,Ee)])],32)]),s("section",Ye,[t[12]||(t[12]=s("div",{class:"px-6 md:px-10 py-6 border-b border-neutral-200 bg-neutral-100"},[s("h2",{class:"text-[26px] md:text-[30px] font-black text-black uppercase"},"Saved Logos"),s("p",{class:"text-neutral-600 text-[16px] md:text-[18px] leading-[1.5]"}," Revisit any concept you saved. Restoring a logo sends you right back into the builder with the same settings. ")],-1)),s("div",ze,[N.value?(r(),n("div",Ge,"Loading saved logos...")):P.value.length?(r(),n("div",Je,[(r(!0),n(G,null,H(P.value,a=>{var p,j,E,T,M,Y;return r(),n("article",{key:a.id,class:"border border-neutral-200 rounded-[5px] p-6 bg-neutral-50"},[s("div",Oe,[s("div",Qe,[s("h3",qe,u(Q(a)),1),s("p",Ke," Saved "+u(A(a.createdAtDate)),1),(p=a.state)!=null&&p.selectedLogoID?(r(),n("p",We," Logo ID: "+u(a.state.selectedLogoID),1)):b("",!0),(j=a.state)!=null&&j.businessCategory?(r(),n("p",Xe," Category: "+u(a.state.businessCategory),1)):b("",!0),(E=a.state)!=null&&E.selectedIndustry?(r(),n("p",Ze," Industry: "+u(((T=a.state.selectedIndustry)==null?void 0:T.name)||a.state.selectedIndustry),1)):b("",!0),(Y=(M=a.state)==null?void 0:M.selectedColorStyles)!=null&&Y.length?(r(),n("div",et,[(r(!0),n(G,null,H(a.state.selectedColorStyles,(x,re)=>(r(),n("span",{key:`${a.id}-color-${re}`,class:"px-3 py-1 rounded-[5px] bg-white border border-brand-field-border-gray text-[13px] text-neutral-600"},u((x==null?void 0:x.name)||x),1))),128))])):b("",!0)]),s("div",tt,[s("button",{type:"button",class:"cta-btn bg-brand-300 text-white uppercase font-black tracking-[2px] text-[14px] leading-[1] py-3 px-4 rounded-[10px] transition transition-fast hover:bg-brand-200",onClick:x=>ae(a)}," Resume Editing ",8,st),k.value!==a.id?(r(),n("button",{key:0,type:"button",class:"text-red-600 font-bold text-[14px] underline disabled:opacity-50 disabled:cursor-not-allowed",disabled:g.value.has(a.id),onClick:x=>ee(a)}," Delete ",8,at)):(r(),n("div",nt,[t[11]||(t[11]=s("p",{class:"mb-2"}," Are you sure you want to delete? ",-1)),s("div",rt,[s("button",{type:"button",class:"cta-btn bg-red-600 text-white uppercase font-black tracking-[1px] text-[12px] leading-[1] py-2 px-3 rounded-[8px] disabled:opacity-50 disabled:cursor-not-allowed",disabled:g.value.has(a.id),onClick:x=>se(a)},[g.value.has(a.id)?(r(),n("span",lt,"Deleting…")):(r(),n("span",dt,"Yes"))],8,ot),s("button",{type:"button",class:"text-neutral-600 font-bold text-[12px] underline",onClick:te}," No ")])]))])])])}),128))])):(r(),n("div",He," You haven't saved any logos yet. Generate designs and save your favorites to see them here. "))])])])):(r(),n("div",ke,t[5]||(t[5]=[s("h2",{class:"text-[24px] font-bold text-black mb-3"},"You're almost there",-1),s("p",{class:"text-neutral-600 text-[18px] leading-[1.5]"}," Sign in to access your dashboard, update your information, and keep all of your saved logo progress in one place. ",-1)])))])]))}},ft=he(it,[["__scopeId","data-v-e1c64a09"]]);export{ft as default};
